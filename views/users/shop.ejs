<%-include('../layouts/header.ejs') %>
<style>
    .xxx{
        font-weight: 900;
        text-transform: uppercase;
    }
    .xxx:hover{
        color: rgb(118, 167, 167);
    }
    .active1{
        background-color:black;
        color:red;
    }
    .sort-container {
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  margin: 20px;
}

.sort-label {
  font-size: 16px;
  margin-bottom: 10px;
  color: #000000;
}

.sort-select {
  background-color: #060606;
  color:#a77373;
  border: none;
  padding: 8px 12px;
  border-radius: 5px;
  font-size: 16px;
  cursor: pointer;
  transition: all 0.3s ease-in-out;
  margin-left: 57px;
}

.sort-select:hover {
  background-color: #171717;
}

</style>
    <!-- Hero Section Begin -->
    <section class="hero hero-normal">
        <div class="container">
            <div class="row">
                 <div class="col-lg-3">
                   <div class="hero__categories">
                            <div class="hero__categories__all" style="background-color: black;">
                               <i class="fa fa-bars"></i>
                               <span>Categories</span>
                           </div>
                           <ul>
                               <%for(let i=0;i<CategoryList.length;i++){%>
                                 <li><button style="color:darkgreen; border: none; background-color: white;" type="submit" onclick="categoryfilterss('<%=CategoryList[i]._id%>')" id="<%=CategoryList[i].name%>" value="<%=CategoryList[i].name%>"><%=CategoryList[i].name%></button></li>  
                                 
                               <% } %>
   
                           </ul> 
                       </div>
                </div> 
                <div class="col-lg-9">
                     <div class="hero__search"> 
                        <div class="hero__search__form">
                            <form action="#">
                                <div class="hero__search__categories">
                                   Search here
                                    <span class=""></span>
                                </div>
                                <input  id="search"  onkeyup="xxx()" type="text" placeholder="What do yo u need?">
                            </form>
                        </div>
                        <!-- <div class="hero__search__phone"> 
                            <div class="hero__search__phone__icon">
                                <i class="fa fa-phone"></i>
                            </div>
                            <div class="hero__search__phone__text">
                                <h5>+65 11.188.888</h5>
                                <span>support 24/7 time</span>
                            </div>
                        </div>
                    </div>
                </div> -->
            </div>
        </div>
    </section>
    <!-- Hero Section End -->

    <!-- Breadcrumb Section Begin -->
    <section class="breadcrumb-section set-bg" data-setbg="img/breadcrumb.jpg">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 text-center">
                    <div class="breadcrumb__text">
                        <h2>AUDIFY Shop</h2>
                        <div class="breadcrumb__option">
                            <a href="/">Home</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- Breadcrumb Section End -->

    <!-- Product Section Begin -->
    <section class="product spad">
        <div class="container">
            <div class="row">
                
                <div class="col-lg-3 col-md-5">
                    <div class="sidebar">
                        
                        <div class="col-lg-4 col-md-5">
                            <div class="sort-container mt-5">
                              <label for="sort-select" class="sort-label"></label>
                              <select id="sort-select" onchange="sortProducts()" class="sort-select">
                                <option value="LtoH" id="low">Price: Low to High</option>
                                <option value="HtoL" id="high">Price: High to Low</option>
                              </select>
                            </div>
                          </div>
                       


                          
                        <div class="sidebar__item">
                            <h4></h4>
                            <div class="price-range-wrap">
                                <!-- <div class="price-range ui-slider ui-corner-all ui-slider-horizontal ui-widget ui-widget-content"
                                    data-min="10" data-max="540">
                                    <div class="ui-slider-range ui-corner-all ui-widget-header"></div>
                                    <span tabindex="0" class="ui-slider-handle ui-corner-all ui-state-default"></span>
                                    <span tabindex="0" class="ui-slider-handle ui-corner-all ui-state-default"></span>
                                </div> -->
                                <!-- <div class="range-slider">
                                    <div class="price-input">
                                        <input type="text" id="minamount">
                                        <input type="text" id="maxamount">
                                    </div>
                                </div> -->
                            </div>
                        </div>
                         <div class="sidebar__item sidebar__item__color--option">
                            <h4></h4>
                            <!-- <div class="sidebar__item__color sidebar__item__color--white">
                                <label for="white">
                                    White
                                    <input type="radio" id="white">
                                </label>
                            </div>
                            <div class="sidebar__item__color sidebar__item__color--gray">
                                <label for="gray">
                                    Gray
                                    <input type="radio" id="gray">
                                </label>
                            </div>
                            <div class="sidebar__item__color sidebar__item__color--red">
                                <label for="red">
                                    Red
                                    <input type="radio" id="red">
                                </label>
                            </div>
                            <div class="sidebar__item__color sidebar__item__color--black">
                                <label for="black">
                                    Black
                                    <input type="radio" id="black">
                                </label>
                            </div>
                            <div class="sidebar__item__color sidebar__item__color--blue">
                                <label for="blue">
                                    Blue
                                    <input type="radio" id="blue">
                                </label>
                            </div>
                            <div class="sidebar__item__color sidebar__item__color--green">
                                <label for="green">
                                    Green
                                    <input type="radio" id="green">
                                </label>
                            </div> -->
                        </div> 
                       
                          
                      
                        <!-- <div class="sidebar__item">
                            <h4>Popular Size</h4>
                            <div class="sidebar__item__size">
                                <label for="large">
                                    Large
                                    <input type="radio" id="large">
                                </label>
                            </div>
                            <div class="sidebar__item__size">
                                <label for="medium">
                                    Medium
                                    <input type="radio" id="medium">
                                </label>
                            </div>
                            <div class="sidebar__item__size">
                                <label for="small">
                                    Small
                                    <input type="radio" id="small">
                                </label>
                            </div>
                            <div class="sidebar__item__size">
                                <label for="tiny">
                                    Tiny
                                    <input type="radio" id="tiny">
                                </label>
                            </div>
                        </div> -->
                        <br><br><br>
                        <div class="sidebar__item">
                            <div class="latest-product__text">
                                <h4>Latest Products</h4>
                                <div class="latest-product__slider owl-carousel">
                                    <div class="latest-prdouct__slider__item">
                                        <% for(let i=0;i< 3;i++){ %>
                                            <% if(products[i].is_flagged==0) {%>
                                        <a href="#" class="latest-product__item">
                                            <div class="latest-product__item__pic">
                                                <img src="/images/<%=products[i].images[i]  %>" alt="">
                                            </div>
                                            <div class="latest-product__item__text">
                                                <h6><%=products[i].name  %></h6>
                                                <span>₹<%=products[i].price %></span>
                                            </div>
                                        </a>
                                        <% }else{} %>
                                            <% } %>
                                        
                                        
                                    </div>
                                    <div class="latest-prdouct__slider__item">
                                        <% for(let i=0;i< 3;i++){ %>
                                            <% if(products[i].is_flagged==0) {%>
                                        <a href="#" class="latest-product__item">
                                            <div class="latest-product__item__pic">
                                                <img src="/images/<%=products[i].images[i]  %>" alt="">
                                            </div>
                                            <div class="latest-product__item__text">
                                                <h6><%=products[i].name  %></h6>
                                                <span>₹<%=products[i].price %></span>
                                            </div>
                                        </a>
                                        <% }else{} %>
                                            <% } %>
                                        
                                        
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="filter" class="row col-lg-9">
                <div  id="" class="">
                   
                    <div class="filter__item">
                        <div class="row">
                          
                           
                           
                            <div class="col-lg-4 col-md-4">
                                <div class="filter__found">
                                    <h6><span><%=products.length %></span> Products found</h6>
                                </div>
                            </div>
                            
                            <div class="col-lg-4 col-md-3">
                                <div class="filter__option">
                                    <span class="icon_grid-2x2"></span>
                                    <span class="icon_ul"></span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <% for(let i=0;i<products.length;i++){%>
                            <%if(products[i].is_flagged==0){%>
                        
                        <div class="col-lg-4 col-md-6 col-sm-6">
                            <div class="product__item">
                                <div class="product__item__pic set-bg" data-setbg="">
                                    <img id="images" src="/images/<%=products[i].images[0] %>" alt="">
                                    <ul class="product__item__pic__hover">
                                        <li><a href="/addtoWhishlist?id=<%=products[i]._id %>"><i class="fa fa-heart"></i></a></li>

                                        <li><a href="/carter?id=<%=products[i]._id %>"><i class="fa fa-shopping-cart"></i></a></li>
                                        <!-- <li><a href="#"><i class="fa fa-retweet"></i></a></li> -->
                                   
                                    </ul>
                                </div>
                                <div class="product__item__text">
                                    <h6 id="name"><a href="/singleView?id=<%=products[i]._id %>"><%=products[i].name %></a></h6>
                                    <h5 id="price"><a href="/singleView?id=<%=products[i]._id %>" style="text-decoration: none; color: black;" >₹<%=products[i].price %> </a></h5>
                                </div>
                            </div>
                        </div> 
                        <%  }else{} %> 
                        <%} %>                                                                                    
                    </div>

                    <!-- hdsjhdgjhg -->
                   
                    <div class="product__pagination">
                        <% for(let i = 0; i < 5; i++) { %>
                          <button onclick="pagination('<%= i + 1 %>')"><%= i + 1 %></button>
                        <% } %>
                        <a href="#"><i class="fa fa-long-arrow-right"></i></a>
                      </div>
                </div>
            </div>
            </div>
        </div>
    </section>
    <!-- Product Section End -->

    <!-- Footer Section Begin -->
    <footer class="footer spad">
        <div class="container">
            <div class="row">
                <div class="col-lg-3 col-md-6 col-sm-6">
                    <div class="footer__about">
                        <div class="footer__about__logo">
                            <a href="./index.html"><img src="img/logo.png" alt=""></a>
                        </div>
                        <ul>
                            <li>Address: 60-49 Road 11378 New York</li>
                            <li>Phone: +65 11.188.888</li>
                            <li>Email: hello@colorlib.com</li>
                        </ul>
                    </div>
                </div>
                <div class="col-lg-4 col-md-6 col-sm-6 offset-lg-1">
                    <div class="footer__widget">
                        <h6>Useful Links</h6>
                        <ul>
                            <li><a href="#">About Us</a></li>
                            <li><a href="#">About Our Shop</a></li>
                            <li><a href="#">Secure Shopping</a></li>
                            <li><a href="#">Delivery infomation</a></li>
                            <li><a href="#">Privacy Policy</a></li>
                            <li><a href="#">Our Sitemap</a></li>
                        </ul>
                        <ul>
                            <li><a href="#">Who We Are</a></li>
                            <li><a href="#">Our Services</a></li>
                            <li><a href="#">Projects</a></li>
                            <li><a href="#">Contact</a></li>
                            <li><a href="#">Innovation</a></li>
                            <li><a href="#">Testimonials</a></li>
                        </ul>
                    </div>
                </div>
                <div class="col-lg-4 col-md-12">
                    <div class="footer__widget">
                        <h6>Join Our Newsletter Now</h6>
                        <p>Get E-mail updates about our latest shop and special offers.</p>
                        <form action="#">
                            <input type="text" placeholder="Enter your mail">
                            <button type="submit" class="site-btn">Subscribe</button>
                        </form>
                        <div class="footer__widget__social">
                            <a href="#"><i class="fa fa-facebook"></i></a>
                            <a href="#"><i class="fa fa-instagram"></i></a>
                            <a href="#"><i class="fa fa-twitter"></i></a>
                            <a href="#"><i class="fa fa-pinterest"></i></a>
                        </div>
                    </div>
                </div>
            </div>
            <% if (message != null) { %>
                <script>
                      swal({
                        title: "Alert!",
                        text: " <%= message %> ",
                        icon: "warning",
                        timer:2000,
                        showConfirmButton: false
                      })
              </script>
              <% } %>
            <div class="row">
                <div class="col-lg-12">
                    <div class="footer__copyright">
                        <div class="footer__copyright__text"><p><!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
  Copyright &copy;<script>document.write(new Date().getFullYear());</script> All rights reserved | This template is made with <i class="fa fa-heart" aria-hidden="true"></i> by <a href="https://colorlib.com" target="_blank">Colorlib</a>
  <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. --></p></div>
                        <div class="footer__copyright__payment"><img src="img/payment-item.png" alt=""></div>
                    </div>
                </div>
            </div>
        </div>
    </footer>
    <!-- Footer Section End -->

    <!-- Js Plugins -->
    <script src="js/jquery-3.3.1.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/jquery.nice-select.min.js"></script>
    <script src="js/jquery-ui.min.js"></script>
    <script src="js/jquery.slicknav.js"></script>
    <script src="js/mixitup.min.js"></script>
    <script src="js/owl.carousel.min.js"></script>
    <script src="js/main.js"></script>



</body>

</html>




<script>
    let n = 0
    let b = 0
    let categorys
    let search
    let sort
    let ID
    function xxx(){
           search= $('#search').val()
           console.log(search);
           submit(search,categorys,sort)

        }
           
        function categoryfilterss(id) {
            console.log(id);
           
            categorys=id
            submit(search,categorys,sort)
        }

    function submit(search, categorys, sort) {
        $.ajax({
            url: '/categoryfilter',
            type: 'post',
            dataType: 'json',
            contentType: 'application/json',
            data: JSON.stringify({ search, categorys, sort }),
            success: (res) => {

                let html = []
                if (res.Data) {
                    $('#filter').html('')
                    res.Data.forEach(value => {
                        value.forEach((item,i) => {
                            html += `
                      <div class="col-lg-4 col-md-6 col-sm-6">
                        <div class="product__item">
                          <div class="product__item__pic set-bg"  data-setbg="">
                            <img src="images/${item.images[0]}" alt="">
                            <ul class="product__item__pic__hover">
                              <li><a href='/addtoWhishlist?id=${item._id}'><i class="fa fa-heart"></i></a></li>
                              <li><a href='/carter?id=${item._id}'><i class="fa fa-shopping-cart"></i></a></li>
                            </ul>
                          </div>
                          <div class="product__item__text">
                            <h6><a href="/singleView?id=${item._id}">${item.name}</a></h6>
                            <h5><a href="/singleView?id=${item._id}" style='color:black'>₹${item.price}</a></h5>
                          </div>
                        </div>
                      </div>
                  `;
                        })

                    });

                    $('#filter').html(html)

                }
            }
        })
    }


    function sortProducts() {
        let selectedSort = document.querySelector('select').value;
        console.log(selectedSort);
        if (selectedSort === 'LtoH') {
            sort = 'priceLowToHigh';
        } else if (selectedSort === 'HtoL') {
            sort = 'priceHighToLow';
        }
        submit(search,categorys,sort);
    }

</script>